<html style=font-size:40px;line-height:.6;text-align:center><pre id=g style=display:inline-block></pre><script>var g,h,k,l,m,n,e=[[4,5,6,7],[0,4,5,6],[2,4,5,6],[1,2,5,6],[1,2,4,5],[1,4,5,6],[0,1,5,6]].map(function(n){var r,e,f=[];return n.forEach(function(n){r=n%4,e=Math.floor(n/4),f.push([r,e])}),f}),f=[];function p(o,t){var e=k.every(function(r){var e=r[0]+m+o;return r=r[1]+n+t,0<=e&&e<=9&&r<=15&&!f[e][r]});return e&&(m+=o,n+=t,r()),e}function t(){l=Math.floor(Math.random()*e.length),k=e[l],m=Math.floor(7*Math.random()),n=-2;for(var r=Math.floor(3*Math.random()),f=0;f<r;f++)u()}function r(){var e=JSON.parse(JSON.stringify(f));k.forEach(function(r){e[r[0]+m][r[1]+n]=1});for(var r=(r="SCORE: "+"0".repeat(10-(g+"").length-5)+g+"\n")+"□".repeat(12)+"\n",o=0;o<16;o++){for(r+="□",d=0;d<10;d++)r+=e[d][o]?"■":" ";r+="□\n"}r+="□".repeat(12),document.querySelector("#g").innerHTML=r}function u(){if(3!==l){var o=[],t=!0;k.forEach(function(r){var e=2-r[1];r=r[0],0===l&&k[0][0]==k[1][0]&&(e+=1),(e+m<0||r+n<0||10<=e+m||16<=r+n||f[e+m][r+n])&&(t=!1),o.push([e,r])}),t&&(k=o,r())}}var w={37:p.bind(null,-1,0),39:p.bind(null,1,0),40:p.bind(null,0,1),38:u};document.onkeydown=function(n){h&&n.keyCode in w&&w[n.keyCode]()},document.onkeypress=function(){if(!h){for(var n=g=0;n<10;n++){f[n]=[];for(var e=0;e<16;e++)f[n][e]=0}t(),r(),h=1}},document.querySelector("#g").innerHTML="PRESS ANY KEY\n\nTO START NEW GAME.",setInterval(function(){h&&function(){if(!p(0,1))if(k.some(function(r){return r[1]+n<1}))document.querySelector("#g").innerHTML="GAME OVER.\n\n\nSCORE: "+g+"\n\n\nPRESS ANY KEY\n\nTO START NEW GAME.",h=0;else{k.forEach(function(r){f[r[0]+m][r[1]+n]=1}),t();for(var e,o=[],u=0;u<16;u++){e=!0;for(var a=0;a<10;a++)if(!f[a][u]){e=!1;break}e&&o.unshift(u)}if(o.length)for(g+=o.length,e=1,u=o.shift()-1;0<=u;u--)if(o.length&&o[0]===u)o.shift(),e++;else for(a=0;a<10;a++)f[a][u+e]=f[a][u];r()}}()},400)</script>